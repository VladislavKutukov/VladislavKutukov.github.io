"use strict";(self.webpackChunkmy_button_project=self.webpackChunkmy_button_project||[]).push([[4691],{"./src/MUI/components/Input/input.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _mui_material_TextField__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),_mui_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/styles/styled/styled.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Input=_ref=>{let{label,placeholder,input,meta:{touched,invalid,error,submitError}={touched:!1,invalid:!1,error:""},...custom}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledTextField,{label,placeholder,error:touched&&invalid,helperText:touched&&(error||submitError),...input,InputLabelProps:{shrink:!0},...custom,InputProps:{...custom.InputProps}})};const StyledTextField=(0,_mui_styles__WEBPACK_IMPORTED_MODULE_2__.A)(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_3__.A)((function inputStyles(_ref2){let{theme}=_ref2;return{fontFamily:"'Helvetica', sans-serif","& .MuiInputLabel-outlined":{fontSize:"16px",lineHeight:"18px",height:"18px",fontWeight:700,color:"#004E9E",maxWidth:"calc(100% - 30px)",transform:"translate(15px, 18px) scale(1)","&.MuiInputLabel-sizeSmall":{fontSize:"14px",lineHeight:"16px",height:"16px",transform:"translate(15px, 12px) scale(1)"},"&.Mui-focused":{color:"#004E9E",transform:"translate(15px, -9px) scale(1)"},"&.MuiInputLabel-shrink":{color:"#004E9E",transform:"translate(15px, -9px) scale(1)"},"&.Mui-error":{color:"#EF4444"},"&.Mui-disabled":{color:"#868686"}},"& .MuiInputBase-adornedStart":{fontSize:"16px",paddingLeft:"10px","& .MuiInputBase-input":{paddingLeft:"10px","&.MuiInputBase-inputSizeSmall":{paddingLeft:"10px"}},"&.MuiInputBase-sizeSmall":{fontSize:"13px"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"#b1b1b1"},"& .MuiInputBase-adornedEnd":{fontSize:"16px",paddingRight:"10px","& .MuiInputBase-input":{paddingRight:"10px","&.MuiInputBase-inputSizeSmall":{paddingRight:"10px"}},"&.MuiInputBase-sizeSmall":{fontSize:"13px"}},"& .MuiInputAdornment-root":{margin:"0 10px","& .MuiButtonBase-root":{fontSize:"16px","& > svg ":{fontSize:"1.5em"}},"&.MuiInputAdornment-sizeSmall":{"& .MuiButtonBase-root":{fontSize:"12px",padding:"4px"}}},"& .MuiInputBase-input":{fontFamily:"'Helvetica', sans-serif",padding:"19.5px 10px",fontSize:"14px",lineHeight:"16px",height:"16px",fontWeight:400,"&.MuiInputBase-inputSizeSmall":{fontSize:"12px",lineHeight:"20px",height:"13px",padding:"13.5px 10px"}},"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #D3D3D3","&:hover":{border:"2px solid #D3D3D3"},"& legend":{fontSize:"16px",fontWeight:700}},"& .MuiOutlinedInput-root":{"& svg":{height:"1em",width:"1em"},"&.MuiInputBase-adornedStart":{"& > svg ":{fontSize:"1.5em"}},"&.MuiInputBase-adornedEnd":{"& > svg ":{fontSize:"1.5em"}},"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #D3D3D3"},"&.MuiInputBase-sizeSmall":{"& legend":{fontSize:"14px"}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #004E9E","& legend":{maxWidth:"100%"}}},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #D3D3D3"}}}}})),__WEBPACK_DEFAULT_EXPORT__=Input;Input.__docgenInfo={description:"",methods:[],displayName:"Input",props:{meta:{defaultValue:{value:'{\n  touched: false,\n  invalid: false,\n  error: "",\n}',computed:!1},required:!1}}}},"./src/MUI/components/Select/asyncSelect.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>asyncSelect_stories,МножественныйВыбор:()=>МножественныйВыбор,СНачальнымЗначением:()=>СНачальнымЗначением,СПодсказкой:()=>СПодсказкой,Стандартный:()=>Стандартный});var react_final_form_es=__webpack_require__("./node_modules/react-final-form/dist/react-final-form.es.js"),Stack=__webpack_require__("./node_modules/@mui/material/esm/Stack/Stack.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),react=__webpack_require__("./node_modules/react/index.js"),Autocomplete=__webpack_require__("./node_modules/@mui/material/esm/Autocomplete/Autocomplete.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/esm/CircularProgress/CircularProgress.js"),Input_input=__webpack_require__("./src/MUI/components/Input/input.jsx"),styled=__webpack_require__("./node_modules/@mui/styles/styled/styled.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),moment_timezone=(__webpack_require__("./node_modules/store/dist/store.legacy.js"),__webpack_require__("./node_modules/moment-timezone/index.js")),moment_timezone_default=__webpack_require__.n(moment_timezone),moment_range=__webpack_require__("./node_modules/moment-range/dist/moment-range.js");__webpack_require__("./node_modules/moment/locale/ru.js");(0,moment_range.extendMoment)(moment_timezone_default());const getFilterParams=function(values){const params={},strictKeys=getStrictKeysForColumns(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return Object.keys(values).forEach((key=>{"object"==typeof values[key]&&null!==values[key]?values[key].start||values[key].end?Object.keys(values[key]).forEach((item=>{params[`where[${key}][${item}]`]=values[key][item]})):values[key].filterName?params[`where[${values[key].filterName}]`]=values[key].id:strictKeys.includes(key)?params[`where[${key}]`]=values[key].id:params[`where[${key}Id]`]=values[key].id:params[`where[${key}]`]=values[key]})),params},getStrictKeysForColumns=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((column=>{var _column$field;return"select"===(null===(_column$field=column.field)||void 0===_column$field?void 0:_column$field.type)})).map((column=>column.id))};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const AsyncSelect=_ref=>{let{disableClearable,label,input,meta:{touched,invalid,error,submitError},readOnly,loadOptions,required,multiple,placeholder,getOptionDisabled,isOptionEqualToValue=(option,value)=>option.id===value.id,formParams,renderOptions,isNeedUpdateOnDrop,customResetOptions,customOnLoadEntitiesOptions,customRenderOption,...custom}=_ref;const[open,setOpen]=react.useState(!1),[limit,setLimit]=react.useState(10),[inputValue,setInputValue]=react.useState(""),[inputValueMultiple,setInputValueMultiple]=react.useState(""),values=multiple?inputValueMultiple:inputValue,{loading,value:options=[],execute:fetchOptions,setValue:setOptions}=function(callback){let cache=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stale-while-revalidate";const[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(),[value,setValue]=(0,react.useState)(),callbackRef=(0,react.useRef)(callback);callbackRef.current=callback;const execute=(0,react.useCallback)((function(){setLoading(!0),setError(void 0),"must-revalidate"===cache&&setValue(void 0),callbackRef.current(...arguments).then(setValue).catch(setError).finally((()=>setLoading(!1)))}),[]);return{error,loading,value,execute,setValue,setError}}((async resetOptions=>{var _getValue;let params={page:1,limit};values===((null===(_getValue=getValue())||void 0===_getValue?void 0:_getValue.displayName)||"")||resetOptions||(params.search=values),formParams&&(params={...params,...getFilterParams(formParams)});const response=await loadOptions(params);if(response.error)throw response;return renderOptions?renderOptions(response.entries):customOnLoadEntitiesOptions?customOnLoadEntitiesOptions(response.entries):response.entries}));react.useEffect((()=>{setInputValue(getValue())}),[]),react.useEffect((()=>{!readOnly&&open&&fetchOptions()}),[limit]),react.useEffect((()=>{if(!readOnly&&open){const getOptions=setTimeout((()=>fetchOptions()),1e3);return()=>clearTimeout(getOptions)}}),[values]);react.useEffect((()=>{setOptions([])}),[formParams,customResetOptions]);const getValue=()=>multiple?Array.isArray(input.value)?input.value:[]:input.value||null,syncInputValue=()=>{var _getValue2;multiple?setInputValueMultiple(""):setInputValue(renderOptionLabel(null!==(_getValue2=getValue())&&void 0!==_getValue2?_getValue2:""))};react.useEffect((()=>{syncInputValue()}),[input.value]);const handleKeyDown=event=>{"Backspace"===event.key&&multiple&&(setInputValueMultiple((prevValue=>prevValue.slice(0,-1))),event.preventDefault())};return(0,jsx_runtime.jsx)(StyledSelect,{forcePopupIcon:!0,multiple,value:getValue(),inputValue:values,id:input.name,onOpen:()=>{readOnly||(setOpen(!0),options.length&&!isNeedUpdateOnDrop||fetchOptions())},onClose:(event,reason)=>{switch(setOpen(!1),reason){case"toggleInput":case"escape":case"blur":syncInputValue()}input.onBlur()},onChange:(event,newValue,reason)=>{switch(reason){case"selectOption":input.onChange(newValue);break;case"removeOption":newValue.length?input.onChange(newValue):input.onChange("");break;case"clear":input.onChange("")}},onInputChange:(event,newInputValue)=>{multiple&&""!==newInputValue?setInputValueMultiple(newInputValue):setInputValue(newInputValue)},ListboxProps:{role:"searchbox",onScroll:event=>{const listboxNode=event.currentTarget;Math.ceil(listboxNode.scrollTop+listboxNode.clientHeight)===listboxNode.scrollHeight&&setLimit(limit+10)},style:{maxHeight:"15rem"},position:"bottom-start"},getOptionDisabled:getOptionDisabled||(option=>multiple?!!Array.isArray(input.value)&&input.value.some((item=>item.id===option.id)):option.disabled?option.disabled:option.id===input.value.id),getOptionLabel:renderOptionLabel,options,filterOptions:options=>options,loading,readOnly,disableClearable:disableClearable||readOnly,limitTags:5,loadingText:"Загрузка...",noOptionsText:"Нет совпадений",clearText:"Очистить",renderInput:params=>{var _custom$InputProps;return(0,jsx_runtime.jsx)(Input_input.Ay,{...params,label,error:touched&&invalid,helperText:touched&&(error||submitError),required,InputProps:{...params.InputProps,endAdornment:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[loading?(0,jsx_runtime.jsx)(CircularProgress.A,{size:20}):null,readOnly?null:params.InputProps.endAdornment,null!==(_custom$InputProps=custom.InputProps)&&void 0!==_custom$InputProps&&_custom$InputProps.endAdornment?custom.InputProps.endAdornment:null]})},InputLabelProps:{shrink:!0},placeholder,sx:{...custom.sx},onKeyDown:handleKeyDown})},renderOption:customRenderOption||renderOption,blurOnSelect:!0,clearOnBlur:!0,isOptionEqualToValue,...custom})},renderOptionLabel=option=>option.displayName?option.displayName:option.fullName?option.fullName:option.name?option.name:option.label?option.label:option,renderOption=(props,option)=>(0,react.createElement)(Box.A,{component:"li",...props,key:option.id},renderOptionLabel(option));const StyledSelect=(0,styled.A)(Autocomplete.A)((function styles(){return{fontFamily:"'Helvetica', sans-serif",marginBottom:"25px","& .MuiOutlinedInput-root.MuiInputBase-sizeSmall":{paddingTop:"9px",paddingBottom:"9px",paddingLeft:"10px"},"& .MuiTextField-root.MuiFormControl-root":{margin:0},"& .MuiInputBase-root":{minHeight:"55px"},"& .MuiInputBase-adornedEnd":{"&.MuiInputBase-sizeSmall":{paddingRight:20,fontSize:"13px",minHeight:"40px"}},"& .MuiOutlinedInput-root.MuiInputBase-adornedEnd":{paddingRight:20},"& .MuiInputAdornment-root":{margin:"0 5px",height:"unset"}}})),asyncSelect=AsyncSelect;AsyncSelect.__docgenInfo={description:"",methods:[],displayName:"AsyncSelect",props:{isOptionEqualToValue:{defaultValue:{value:"(option, value) => option.id === value.id",computed:!1},required:!1},customRenderOption:{defaultValue:{value:"undefined",computed:!0},required:!1}}};const asyncSelect_stories={title:"MUI/Асинхронный выбор",component:asyncSelect,argTypes:{}};function ExampleForm(_ref){let{initialValues,...props}=_ref;return(0,jsx_runtime.jsx)(react_final_form_es.lV,{onSubmit:values=>{alert(printValue(values.select))},initialValues,children:_ref2=>{let{handleSubmit}=_ref2;return(0,jsx_runtime.jsx)("form",{onSubmit:handleSubmit,children:(0,jsx_runtime.jsxs)(Stack.A,{spacing:2,sx:{width:"300px"},children:[(0,jsx_runtime.jsx)(react_final_form_es.D0,{name:"select",children:_ref3=>{let{input,meta}=_ref3;return(0,jsx_runtime.jsx)(asyncSelect,{input,meta,style:{marginBottom:0},loadOptions,...props})}}),(0,jsx_runtime.jsx)(Button.A,{variant:"contained",sx:{width:"140px"},onClick:handleSubmit,children:"Отправить"})]})})}})}const printValue=value=>Array.isArray(value)?value.map((option=>option.displayName)):null==value?void 0:value.displayName,loadOptions=()=>new Promise((resolve=>{resolve({entries:[{id:0,displayName:"Вариант 0"},{id:1,displayName:"Вариант 1"},{id:2,displayName:"Вариант 2"},{id:3,displayName:"Вариант 3"},{id:4,displayName:"Вариант 4"}],total:5})})),Template=args=>(0,jsx_runtime.jsx)(ExampleForm,{...args}),Стандартный=Template.bind({});Стандартный.args={label:"Стандартный"};const СПодсказкой=Template.bind({});СПодсказкой.args={placeholder:"Выберите значение"};const СНачальнымЗначением=Template.bind({});СНачальнымЗначением.args={initialValues:{select:{id:0,displayName:"Вариант 0"}},label:"С начальным значением"};const МножественныйВыбор=Template.bind({});МножественныйВыбор.args={initialValues:{select:[{id:0,displayName:"Вариант 0"},{id:4,displayName:"Вариант 4"}]},label:"Множественный выбор",multiple:!0};const __namedExportsOrder=["Стандартный","СПодсказкой","СНачальнымЗначением","МножественныйВыбор"];Стандартный.parameters={...Стандартный.parameters,docs:{...Стандартный.parameters?.docs,source:{originalSource:"args => <ExampleForm {...args} />",...Стандартный.parameters?.docs?.source}}},СПодсказкой.parameters={...СПодсказкой.parameters,docs:{...СПодсказкой.parameters?.docs,source:{originalSource:"args => <ExampleForm {...args} />",...СПодсказкой.parameters?.docs?.source}}},СНачальнымЗначением.parameters={...СНачальнымЗначением.parameters,docs:{...СНачальнымЗначением.parameters?.docs,source:{originalSource:"args => <ExampleForm {...args} />",...СНачальнымЗначением.parameters?.docs?.source}}},МножественныйВыбор.parameters={...МножественныйВыбор.parameters,docs:{...МножественныйВыбор.parameters?.docs,source:{originalSource:"args => <ExampleForm {...args} />",...МножественныйВыбор.parameters?.docs?.source}}}}}]);